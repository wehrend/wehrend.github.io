<svg width="120.00" height="200.00" 
     viewBox="0.0 0.0 120.0 200.0" 
     viewPort="0 0 120px 200px" 
     version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns="http://www.w3.org/2000/svg">
     <defs>
        <marker id="endarrow" markerWidth="4" markerHeight="3" refX="0" refY="1.5" orient="auto" markerUnits="strokeWidth">
            <polygon points="0 0, 4 1.5, 0 3" fill="black" />
        </marker>
        <marker id="endarrowlightskyblue" markerWidth="4" markerHeight="3" refX="0" refY="1.5" orient="auto" markerUnits="strokeWidth">
            <polygon points="0 0, 4 1.5, 0 3" fill="lightskylightskyblue" />
        </marker>
    </defs>
    <symbol id="alu_cell">
        <rect x="10" y="14" width="26" height="26" style="fill:none;stroke:black;"/>
        <text x="13" y="21" font-size="4">CarryIn</text>
        <text x="15" y="29" font-size="6">ALU</text>
        <text x="13" y="36" font-size="4">CarryOut</text>
        <line x1="18" y1="0" x2="18" y2="10" style="fill:none;stroke:black;" marker-end="url(#endarrow)"/>
        <line x1="0" y1="19" x2="6" y2="19" style="fill:none;stroke:black;" marker-end="url(#endarrow)"/>
        <line x1="0" y1="34" x2="6" y2="34" style="fill:none;stroke:black;" marker-end="url(#endarrow)"/>
        <!--  output -->
        <line x1="36" y1="27" x2="52" y2="27" style="fill:none;stroke:black;" marker-end="url(#endarrow)"/>
    </symbol>
    <text x="42" y="8" font-size="4">CarryIn</text>
    <text x="24" y="30" font-size="4">a0</text>
    <text x="24" y="45" font-size="4">b0</text>
    <text x="87" y="38" font-size="4">Result0</text>
    <use x="30" y="10" href="#alu_cell"/>
    <text x="24" y="70" font-size="4">a1</text>
    <text x="24" y="85" font-size="4">b1</text>
    <text x="87" y="78" font-size="4">Result1</text>
    <use x="30" y="50" href="#alu_cell"/>
    <text x="24" y="110" font-size="4">a2</text>
    <text x="24" y="125" font-size="4">b2</text>
    <text x="87" y="118" font-size="4">Result2</text>
    <use x="30" y="90" href="#alu_cell"/>
    <text x="20" y="170" font-size="4">a(n-1)</text>
    <text x="20" y="185" font-size="4">b(n-1)</text>
    <text x="87" y="178" font-size="4">Result(n-1)</text>
    <use x="30" y="150" href="#alu_cell"/>
    <line x1="48" y1="130" x2="48" y2="140" style="fill:none;stroke:black;" marker-end="url(#endarrow)"/>
    <rect x="43" y="180" width="15" height="8" style="fill:white;stroke:none;"/>
    <text x="75" y="8" font-size="4" style="fill:lightskylightskyblue">Operation</text>
    <polyline points="80,10 80,145" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,15 60,15 60,21" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowlightskyblue)"/>
    <circle cx="80" cy="15" r="0.5" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,55 60,55 60,61" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowlightskyblue)"/>
    <circle cx="80" cy="55" r="0.5" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;"/>
     <polyline points="80,95 60,95 60,101" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowlightskyblue)"/>
     <circle cx="80" cy="95" r="0.5" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,150 80,155 60,155 60,160" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;"  marker-end="url(#endarrowlightskyblue)"/>
    <line x1="48" y1="140" x2="48" y2="150" style="fill:none;stroke:black;stroke-width:0.5px;stroke-dasharray:1,1" />
    <line x1="80" y1="140" x2="80" y2="150" style="fill:none;stroke:lightskylightskyblue;stroke-width:0.5px;stroke-dasharray:1,1" />
/>
</svg>
