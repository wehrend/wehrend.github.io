<svg width="175.00" height="180.00" 
     viewBox="0.0 0.0 175.0 180.0" 
     viewPort="0 0 175px 180px" 
     version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns="http://www.w3.org/2000/svg">
    <defs>
    <g transform="translate(-50,-40)" id="nmos">
    <g transform="rotate(-90,50,50)" >
        <polyline points="45,70 40,70  40,85 45,85" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
        <line x1="38" y1="70" x2="38" y2="85" style="stroke:black;stroke-width:1;fill:none;"/>
        <line x1="31" y1="77" x2="38" y2="77" style="stroke:black;stroke-width:1;fill:none;"/>
    </g>
    </g>
    <g transform="scale(0.8)" id="buffer">
        <polyline points="10,10 25,20  10,30 10,10 25,20" style="fill:white;stroke:black;stroke-width:1;"/>
    </g>
</defs>
    <!-- verticals     -->
    <circle cx="15" cy="10" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="50" cy="10" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="85" cy="10" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="120" cy="10" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <polyline points="15,105 15,5" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="50,65 50,5" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="85,25 85,5" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="120,145 120,5" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="40" cy="20" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="75" cy="20" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="110" cy="20" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="145" cy="20" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <!--     connectors A3 -->
    <polyline points="15,25 20,25" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="50,25 55,25" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="85,25 90,25" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="120,25 125,25" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    
    <circle cx="15" cy="25" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="50" cy="25" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="120" cy="25" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <!--     line3 -->
    <text x="2" y="10" font-size="4">A<tspan dy="1">3</tspan></text>
    <polyline points="8,10 140,10" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="10,20 165,20" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="35,25 40,25 40,20" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="0" y="10" href="#nmos"/>
    <polyline points="70,25 75,25 75,20" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="35" y="10" href="#nmos"/>
    <polyline points="105,25 110,25 110,20" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="70" y="10" href="#nmos"/>
    <polyline points="140,25 145,25 145,20" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="105" y="10" href="#nmos"/>
    <use x="140" y="4" href="#buffer"/>
    <text x="167" y="21" font-size="4">B<tspan dy="1">3</tspan></text>
    
    <!--     connectors A2 -->
    <polyline points="15,65 20,65" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="50,65 55,65" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="85,65 90,65" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="120,65 125,65" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="15" cy="65" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="50" cy="65" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="85" cy="65" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="120" cy="65" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <polyline points="85,50 85,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="85" cy="50" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <!--     line 2 -->
    <text x="2" y="50" font-size="4">A<tspan dy="1">2</tspan></text>
    <polyline points="8,50 140,50" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="10,60 165,60" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="35,65 40,65 40,60" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="0" y="50" href="#nmos"/>
    <polyline points="70,65 75,65 75,60" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="35" y="50" href="#nmos"/>
    <polyline points="105,65 110,65 110,60" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="70" y="50" href="#nmos"/>
    <polyline points="140,65 145,65 145,60" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="105" y="50" href="#nmos"/>
    <circle cx="40" cy="60" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="75" cy="60" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="110" cy="60" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="145" cy="60" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <use x="140" y="44" href="#buffer"/>
    <text x="167" y="61" font-size="4">B<tspan dy="1">2</tspan></text>
    
    <!--     connectors A1 -->
    <polyline points="15,105 20,105" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="50,105 55,105" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="85,105 90,105" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="120,105 125,105" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="15" cy="105" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="50" cy="105" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="85" cy="105" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="120" cy="105" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <polyline points="50,90 50,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="50" cy="90" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <!--     line 1 -->
    <text x="2" y="90" font-size="4">A<tspan dy="1">1</tspan></text>
    <polyline points="8,90 140,90" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="10,100 165,100" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="35,105 40,105 40,100" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="0" y="90" href="#nmos"/>
    <polyline points="70,105 75,105 75,100" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="35" y="90" href="#nmos"/>
    <polyline points="105,105 110,105 110,100" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="70" y="90" href="#nmos"/>
    <polyline points="140,105 145,105 145,100" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="105" y="90" href="#nmos"/>
    <circle cx="40" cy="100" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="75" cy="100" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="110" cy="100" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="145" cy="100" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <use x="140" y="84" href="#buffer"/>
    <text x="167" y="101" font-size="4">B<tspan dy="1">1</tspan></text>
    
    <!--     connectors A0 -->
    <polyline points="15,145 20,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="50,145 55,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="85,145 90,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="120,145 125,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="15" cy="145" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="50" cy="145" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="85" cy="145" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="120" cy="145" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <polyline points="50,90 50,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="50" cy="90" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <polyline points="15,130 15,145" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <circle cx="15" cy="130" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    
    <!--     line 0 -->
    <text x="2" y="130" font-size="4">A<tspan dy="1">0</tspan></text>
    <polyline points="8,130 140,130" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="10,140 165,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="35,145 40,145 40,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="0" y="130" href="#nmos"/>
    <polyline points="70,145 75,145 75,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="35" y="130" href="#nmos"/>
    <polyline points="105,145 110,145 110,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="70" y="130" href="#nmos"/>
    <polyline points="140,145 145,145 145,140" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
    <use x="105" y="130" href="#nmos"/>
    <circle cx="40" cy="140" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="75" cy="140" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="110" cy="140" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <circle cx="145" cy="140" r="0.7" style="fill:none;stroke:black;stroke-width:1;"/>
    <use x="140" y="124" href="#buffer"/>
    <text x="167" y="141" font-size="4">B<tspan dy="1">0</tspan></text>
    
    <!-- control lines -->
    <polyline points="132,158 132,165" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="97,165 97,158 113,158 113,125 123,125 123,119 132,119" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="62,165 62,158 79,158 79,125 88,125 88,119 115,119 115,85 125,85 125,79 132,79" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="27,165 27,158 43,158 43,130 43,125 54,125 54,119 80,119 80,87 90,87 90,79 115,79 115,45 123,45 123,39 132,39" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="12,125 20,125 20,119 25,119 43,119 43,85 53,85 53,79 78,79 78,45 90,45 90,39 97,39" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="12,86 22,86 22,79 43,79 43,45 53,45 53,39 62,39" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="12,86 22,86 22,79 43,79 43,45 53,45 53,39 62,39" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <polyline points="12,46 18,46 18,39 27,39" style="stroke:blue;stroke-width:1;fill:none;stroke-linecap:round"/>
    <text x="24" y="170" font-size="4">Sh<tspan dy="1">0</tspan></text>
    <text x="59" y="170" font-size="4">Sh<tspan dy="1">1</tspan></text>
    <text x="95" y="170" font-size="4">Sh<tspan dy="1">2</tspan></text>
    <text x="129" y="170" font-size="4">Sh<tspan dy="1">3</tspan></text>
    
    <text x="5" y="44" font-size="4">Sh<tspan dy="1">1</tspan></text>
    <text x="5" y="84" font-size="4">Sh<tspan dy="1">2</tspan></text>
    <text x="5" y="124" font-size="4">Sh<tspan dy="1">3</tspan></text>
</svg>
