<svg width="120.00" height="220.00"
     viewBox="0.0 0.0 120.0 220.0"
     viewPort="0 0 120px 220px"
     version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns="http://www.w3.org/2000/svg">
     <defs>
        <marker id="endarrow" markerWidth="4" markerHeight="3" refX="0" refY="1.5" orient="auto" markerUnits="strokeWidth">
            <polygon points="0 0, 4 1.5, 0 3" fill="black" />
        </marker>
        <marker id="endarrowblue" markerWidth="4" markerHeight="3" refX="0" refY="1.5" orient="auto" markerUnits="strokeWidth">
            <polygon points="0 0, 4 1.5, 0 3" fill="lightskyblue" />
        </marker>
    </defs>
    <symbol id="alu_cell">
        <rect x="10" y="14" width="26" height="30" style="fill:none;stroke:black;stroke-width:0.5px;"/>
        <text x="13" y="21" font-size="4">CarryIn</text>
        <text x="15" y="29" font-size="6">ALU</text>
        <text x="15" y="34" font-size="4">Less</text>
        <text x="13" y="40" font-size="4">CarryOut</text>
        <line x1="24" y1="0" x2="24" y2="10" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
        <line x1="0" y1="19" x2="6" y2="19" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
        <line x1="0" y1="26" x2="6" y2="26" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
        <line x1="0" y1="33" x2="6" y2="33" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
        <!--  output -->
        <line x1="36" y1="27" x2="52" y2="27" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
    </symbol>
    <text x="48" y="8" font-size="4">CarryIn</text>
    <text x="24" y="30" font-size="4">a0</text>
    <text x="24" y="37" font-size="4">b0</text>
    <text x="87" y="38" font-size="4">Result0</text>
    <use x="30" y="10" href="#alu_cell"/>
    <text x="24" y="74" font-size="4">a1</text>
    <text x="24" y="81" font-size="4">b1</text>
    <text x="26" y="88" font-size="4">0</text>
    <text x="87" y="82" font-size="4">Result1</text>
    <use x="30" y="54" href="#alu_cell"/>
    <text x="24" y="118" font-size="4">a2</text>
    <text x="24" y="125" font-size="4">b2</text>
    <text x="26" y="132" font-size="4">0</text>
    <text x="87" y="126" font-size="4">Result2</text>
    <use x="30" y="98" href="#alu_cell"/>
    <text x="19" y="180" font-size="4">a(n-1)</text>
    <text x="19" y="187" font-size="4">b(n-1)</text>
    <text x="26" y="194" font-size="4">0</text>
    <text x="87" y="188" font-size="4">Result(n-1)</text>
    <use x="30" y="160" href="#alu_cell"/>
    <line x1="54" y1="142" x2="54" y2="152" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
    <rect x="43" y="195" width="18" height="7" style="fill:white;stroke:none;"/>
    <text x="75" y="8" font-size="4" style="fill:lightskyblue">Operation</text>
    <polyline points="80,10 80,155" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,15 60,15 60,21" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="80" cy="15" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,59 60,59 60,65" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="80" cy="59" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,103 60,103 60,109" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="80" cy="103" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="80,160 80,165 60,165 60,170" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"  marker-end="url(#endarrowblue)"/>
    <line x1="54" y1="150" x2="54" y2="160" style="fill:none;stroke:black;stroke-width:0.5px;stroke-dasharray:1,1" />
    <line x1="80" y1="150" x2="80" y2="160" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;stroke-dasharray:1,1" />
    <polyline points="80,59 60,59 60,65" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <polyline points="66.5,192 80,192 80,210 10,210 10,162" style="fill:none;stroke:black;stroke-width:0.5px;"/>
    <line x1="10" y1="150" x2="10" y2="162" style="fill:none;stroke:black;stroke-width:0.5px;stroke-dasharray:1,1" />
    <polyline points=" 10,155 10,43 36,43" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
    <text x="82" y="194" font-size="4">Set</text>
    <line x1="66" y1="198" x2="82" y2="198" style="fill:none;stroke:black;stroke-width:0.5px;" marker-end="url(#endarrow)"/>
    <text x="87" y="199" font-size="4">Overflow</text>
    <!-- xinvert  -->
    <text x="13" y="3" font-size="4" style="fill:lightskyblue">Binvert</text>
    <polyline points="20,5 20,155" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <line x1="20" y1="150" x2="20" y2="162" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;stroke-dasharray:1,1" />
    <polyline points="20,160 20,165 45,165 45,170" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"  marker-end="url(#endarrowblue)"/>
    <polyline points="20,15 45,15 45,21" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="20" cy="15" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="20,59 45,59 45,65" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="20" cy="59" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="20,103 45,103 45,109" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="20" cy="103" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <text x="4" y="8" font-size="4" style="fill:lightskyblue">Ainvert</text>
    <polyline points="14,10 14,155" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <line x1="14" y1="15" x2="14" y2="162" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;stroke-dasharray:1,1" />
    <polyline points="14,160 14,168 42,168 42,170" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"  marker-end="url(#endarrowblue)"/>
    <polyline points="14,18 42,18 42,21" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="14" cy="18" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="14,62 42,62 42,65" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="14" cy="62" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/>
    <polyline points="14,106 42,106 42,109" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;" marker-end="url(#endarrowblue)"/>
    <circle cx="14" cy="106" r="0.5" style="fill:none;stroke:lightskyblue;stroke-width:0.5px;"/> -->
</svg>
