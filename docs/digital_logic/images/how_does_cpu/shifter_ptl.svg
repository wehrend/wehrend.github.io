<svg width="140.00" height="150.00" 
     viewBox="0.0 0.0 140.0 150.0" 
     viewPort="0 0 140px 150px" 
     version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns="http://www.w3.org/2000/svg">
    <defs>
    <g transform="rotate(90,50,50)" id="nmos">
        <polyline points="45,70 40,70  40,85 45,85" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
        <line x1="38" y1="70" x2="38" y2="85" style="stroke:black;stroke-width:1;fill:none;"/>
        <line x1="25" y1="77" x2="38" y2="77" style="stroke:black;stroke-width:1;fill:none;"/>
    </g>
    <g transform="rotate(90,50,50)" id="nmos_via">
        <polyline points="45,70 40,70  40,85 45,85" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
        <line x1="38" y1="70" x2="38" y2="85" style="stroke:black;stroke-width:1;fill:none;"/>
        <line x1="25" y1="77" x2="38" y2="77" style="stroke:black;stroke-width:1;fill:none;"/>
        <line x1="40" y1="77" x2="50" y2="77" style="stroke:black;stroke-width:1;fill:none;"/>
    </g>
    <g transform="scale(0.8)" id="buffer">
        <polyline points="10,10 25,20  10,30 10,10 25,20" style="fill:white;stroke:black;stroke-width:1;"/>
    </g>
    <g transform="scale(0.8)" id="buffer2">
        <polyline points="10,10 25,20  10,30 10,10 25,20" style="fill:skyblue;stroke:black;stroke-width:1;"/>
    </g>
</defs>

<!-- slice 1 -->
<text x="15" y="10" font-size="2">A<tspan dy="1">i+1</tspan> Left</text>
<text x="25" y="10" font-size="2">A<tspan dy="1">i+1</tspan> Right</text>
<circle cx="20" cy="15" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<circle cx="25" cy="15" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<circle cx="15" cy="50" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<circle cx="20" cy="50" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<text x="7" y="50" font-size="4">A<tspan dy="1">i</tspan></text>
<line x1="20" y1="15" x2="20" y2="50" style="stroke:black;stroke-width:1;fill:none;"/>
<text x="40" y="4" font-size="4">Right</text>
<text x="60" y="4" font-size="4">nop</text>
<text x="80" y="4" font-size="4">Left</text>
<line x1="63" y1="5" x2="63" y2="40" style="stroke:black;stroke-width:1;fill:none;"/>
<line x1="83" y1="5" x2="83" y2="55" style="stroke:black;stroke-width:1;fill:none;"/>
<circle cx="95" cy="50" r="0.9" style="fill:none;stroke:black;stroke-width:1;"/>
<polyline points="25,15 25,25 35,25" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>

<polyline points="15,50 55,50" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<use x="20" y="-20" href="#nmos_via"/>
<use x="40" y="5" href="#nmos_via"/>
<use x="60" y="30" href="#nmos_via"/>
<polyline points="50,25 95,25 95,75 90,75" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<line x1="70" y1="50" x2="125" y2="50" style="stroke:black;stroke-width:1;fill:none;"/>
<use x="100" y="34" href="#buffer"/>
<text x="126" y="51" font-size="4">Y<tspan dy="1">i</tspan></text>


<!-- slice 2 -->
<rect x="0" y="80" width="140" height="100" style="fill:skyblue;stroke:none;stroke-width:1;"/>
<polyline points="75,75 25,75 25,110" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<circle cx="25" cy="110" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<circle cx="15" cy="110" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<text x="7" y="110" font-size="4">A<tspan dy="1">i-1</tspan></text>
<circle cx="30" cy="50" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<polyline points="30,50 30,90 35,90" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<line x1="43" y1="30" x2="43" y2="70" style="stroke:black;stroke-width:1;fill:none;"/>
<line x1="63" y1="50" x2="63" y2="90" style="stroke:black;stroke-width:1;fill:none;"/>
<line x1="83" y1="70" x2="83" y2="110" style="stroke:black;stroke-width:1;fill:none;"/>
<use x="20" y="45" href="#nmos"/>
<use x="40" y="65" href="#nmos"/>
<use x="60" y="85" href="#nmos"/>
<polyline points="50,90 95,90 95,130 90,130" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<circle cx="95" cy="110" r="0.9" style="fill:none;stroke:black;stroke-width:1;"/>
<polyline points="15,110 55,110" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<line x1="70" y1="110" x2="125" y2="110" style="stroke:black;stroke-width:1;fill:none;"/>
<use x="100" y="94" href="#buffer2"/>
<text x="126" y="111" font-size="4">Y<tspan dy="1">i-1</tspan></text>
<polyline points="20,135 20,130 75,130" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<circle cx="20" cy="135" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<circle cx="35" cy="110" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<polyline points="35,110 35,135" style="stroke:black;stroke-width:1;fill:none;stroke-linecap:round"/>
<circle cx="35" cy="135" r="0.5" style="fill:none;stroke:black;stroke-width:1;"/>
<text x="15" y="140" font-size="3">A<tspan dy="1">i-1</tspan> Left</text>
<text x="33" y="140" font-size="3">A<tspan dy="1">i-1</tspan> Right</text>
</svg>
